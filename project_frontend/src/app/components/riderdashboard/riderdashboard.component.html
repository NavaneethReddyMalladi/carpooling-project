<!-- Navbar
<nav class="navbar">
  <div class="navbar-left">
    <img src="" alt="Logo" class="logo" />
    <span class="welcome-text">Welcome, {{riderDetails.rider_name}}</span>
  </div>
  <div class="navbar-right">
    <a class="nav-link" routerLink="/publish">Publish a ride</a>
    <a class="nav-link" routerLink="/logout">Logout</a>
    <div class="profile-icon">ðŸ‘¤</div>
  </div>
</nav>

<div class="dashboard-container">
  <h1>Rider Dashboard</h1>


  <div class="form-grid">
    <select [(ngModel)]="selectedSource" (change)="onSourceChange()">
      <option value="" disabled>Select Source Stop</option>
      <option *ngFor="let stop of sourceStops" [value]="stop.id">{{ stop.name }}</option>
    </select>

    <select [(ngModel)]="selectedDest" [disabled]="!selectedSource">
      <option value="" disabled>Select Destination Stop</option>
      <option *ngFor="let stop of destStops" [value]="stop.id">{{ stop.name }}</option>
    </select>
  </div>

  <button (click)="searchRides()" class="search-btn" [disabled]="!selectedSource || !selectedDest">
    Search Rides
  </button> -->
<!-- 
  <div class="ride-list">
    <h2>Available Rides</h2>
    <p *ngIf="rides.length === 0">No rides found.</p>
    <ul *ngIf="rides.length > 0">
      <li *ngFor="let ride of rides" class="ride-card">
        <p>
          <strong>Driver:</strong> {{ ride.driver_name }} | 
          <strong>From:</strong> {{ ride.origin_name }} â†’ {{ ride.destination_name }}
        </p> -->
        <!-- <p>
          <strong>Departure:</strong> {{ ride.departure_time | date: 'short' }} | 
          <strong>Seats:</strong> {{ ride.available_seats }}
        </p>
        <button (click)="bookRide(ride)">Book</button>
      </li>
    </ul>
  </div>
</div> -->






<!-- 
 <div class="rider-dashboard">

        <div class="dashboard-header">
            <h1 class="dashboard-title">Rider Dashboard</h1>
            <p class="dashboard-subtitle">Find and book rides to your destination</p>
        </div>

        <div class="search-section">
            <form class="search-form">
                <div class="form-group">
                    <label for="source">From</label>
                    <select id="source" class="form-control">
                        <option value="">Select source location</option>
                        <option value="kondapur">Kondapur</option>
                        <option value="madapur">Madapur</option>
                        <option value="jubilee-hills">Jubilee Hills</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="destination">To</label>
                    <select id="destination" class="form-control">
                        <option value="">Select destination</option>
                        <option value="durgamcheruvu">Durgamcheruvu</option>
                        <option value="jubilee-hills">Jubilee Hills</option>
                    </select>
                </div>

                <button type="submit" class="search-btn">Search Rides</button>
            </form>
        </div>


        <div class="rides-section">
            <div class="section-header">
                <h3 class="section-title">Available Rides</h3>
                <span class="rides-count">4 rides</span>
            </div>

            <div class="rides-container">
   
                <div class="ride-card">
                    <div class="ride-header">
                        <div>
                            <div class="driver-info">
                                <span class="driver-prefix">Driver:</span>
                                <span class="driver-name">dnavaneeth</span>
                            </div>
                            <div class="route-info">
                                <div class="route-visual">
                                    <div class="location-dot origin"></div>
                                    <div class="route-line"></div>
                                    <div class="location-dot destination"></div>
                                </div>
                                <div class="route-locations">
                                    <span class="origin-name">kondapur</span>
                                    <span class="destination-name">jubileehills</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ride-details">
                        <div class="ride-info">
                            <div class="info-item">
                                <span class="info-label">Departure</span>
                                <span class="info-value">6/10/25, 8:30 AM</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Seats</span>
                                <span class="info-value">3</span>
                            </div>
                        </div>
                        <button class="book-btn">Book</button>
                    </div>
                </div>

  
                <div class="ride-card">
                    <div class="ride-header">
                        <div>
                            <div class="driver-info">
                                <span class="driver-prefix">Driver:</span>
                                <span class="driver-name">dmittu</span>
                            </div>
                            <div class="route-info">
                                <div class="route-visual">
                                    <div class="location-dot origin"></div>
                                    <div class="route-line"></div>
                                    <div class="location-dot destination"></div>
                                </div>
                                <div class="route-locations">
                                    <span class="origin-name">kondapur</span>
                                    <span class="destination-name">jubileehills</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ride-details">
                        <div class="ride-info">
                            <div class="info-item">
                                <span class="info-label">Departure</span>
                                <span class="info-value">6/10/25, 8:30 AM</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Seats</span>
                                <span class="info-value">3</span>
                            </div>
                        </div>
                        <button class="book-btn">Book</button>
                    </div>
                </div>

                <div class="ride-card">
                    <div class="ride-header">
                        <div>
                            <div class="driver-info">
                                <span class="driver-prefix">Driver:</span>
                                <span class="driver-name">dmittu</span>
                            </div>
                            <div class="route-info">
                                <div class="route-visual">
                                    <div class="location-dot origin"></div>
                                    <div class="route-line"></div>
                                    <div class="location-dot destination"></div>
                                </div>
                                <div class="route-locations">
                                    <span class="origin-name">kondapur</span>
                                    <span class="destination-name">durgamcheruvu</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ride-details">
                        <div class="ride-info">
                            <div class="info-item">
                                <span class="info-label">Departure</span>
                                <span class="info-value">6/20/25, 3:56 PM</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Seats</span>
                                <span class="info-value">1</span>
                            </div>
                        </div>
                        <button class="book-btn">Book</button>
                    </div>
                </div>


                <div class="ride-card">
                    <div class="ride-header">
                        <div>
                            <div class="driver-info">
                                <span class="driver-prefix">Driver:</span>
                                <span class="driver-name">dmittu</span>
                            </div>
                            <div class="route-info">
                                <div class="route-visual">
                                    <div class="location-dot origin"></div>
                                    <div class="route-line"></div>
                                    <div class="location-dot destination"></div>
                                </div>
                                <div class="route-locations">
                                    <span class="origin-name">madapur</span>
                                    <span class="destination-name">durgamcheruvu</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div class="ride-details">
                        <div class="ride-info">
                            <div class="info-item">
                                <span class="info-label">Departure</span>
                                <span class="info-value">6/3/25, 3:35 PM</span>
                            </div>
                            <div class="info-item">
                                <span class="info-label">Seats</span>
                                <span class="info-value">1</span>
                            </div>
                        </div>
                        <button class="book-btn">Book</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="modal-overlay" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3 class="modal-title">Confirm Booking</h3>
                <button class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <p>Are you sure you want to book this ride?</p>
                <div class="ride-summary">
                    
                </div>
            </div>
            <div class="modal-actions">
                <button class="btn-secondary">Cancel</button>
                <button class="book-btn">Confirm Booking</button>
            </div>
        </div>
    </div> -->














    <!-- Header -->
<header class="header">
  <div class="header-content">
    <div class="logo-section">
      <img src="logo.png" alt="Logo" class="logo">
      <span style="font-family:Arial, Helvetica, sans-serif;" class="welcome-text">Welcome, {{ riderDetails.rider_name || 'mavaneeth' }}</span>
    </div>
    <div class="header-actions">
      <button class="header-btn">Publish a ride</button>
      <button class="header-btn" (click)="logout()">Logout</button>
      <div class="profile-avatar">
        <span>{{riderDetails.rider_name[1] | uppercase}}</span>
      </div>
    </div>
  </div>
</header>

<!-- Main Content -->
<div class="dashboard-container">
  <div class="dashboard-content">
    <h1 class="dashboard-title">Rider Dashboard</h1>

    <!-- Search Form -->
    <div class="search-section">
      <div class="search-form">
        <div class="form-group">
          <select 
            [(ngModel)]="selectedSource" 
            (change)="onSourceChange()" 
            class="form-select">
            <option value="">Select Source</option>
            <option *ngFor="let stop of sourceStops" [value]="stop.id">
              {{ stop.name }}
            </option>
          </select>
        </div>

        <div class="form-group">
          <select 
            [(ngModel)]="selectedDest" 
            class="form-select"
            [disabled]="!selectedSource">
            <option value="">Select Destination</option>
            <option *ngFor="let stop of destStops" [value]="stop.id">
              {{ stop.name }}
            </option>
          </select>
        </div>

        <button 
          class="search-btn" 
          (click)="searchRides()"
          [disabled]="!selectedSource || !selectedDest">
          Search Rides
        </button>
      </div>
    </div>

    <!-- Available Rides Section -->
    <div class="rides-section">
      <h2 class="section-title">Available Rides</h2>
      
      <div *ngIf="rides.length === 0 && !isLoading" class="no-rides">
        <p>No rides available for the selected route. Please try different locations.</p>
      </div>

      <div *ngIf="isLoading" class="loading">
        <p>Searching for rides...</p>
      </div>

      <ul class="rides-list" *ngIf="rides.length > 0">
        <li class="ride-item" *ngFor="let ride of rides">
          <div class="ride-info">
            <div class="ride-header">
              <strong>Driver:</strong> {{ ride.driver_name || 'Unknown' }} | 
              <strong>From:</strong> {{ getStopName(ride.origin_stop_id) }} â†’ {{ getStopName(ride.destination_stop_id) }}
            </div>
            <div class="ride-details">
              <span><strong>Departure:</strong> {{ formatDateTime(ride.departure_time) }}</span> | 
              <span><strong>Seats:</strong> {{ ride.available_seats || ride.seats }}</span>
              <span *ngIf="ride.price" class="price">| <strong>Price:</strong> â‚¹{{ ride.price }}</span>
            </div>
          </div>
          <button class="book-btn" (click)="bookRide(ride)">Book</button>
        </li>
      </ul>
    </div>

    <!-- Booking Modal -->
    <div class="modal-overlay" *ngIf="selectedRide" (click)="closeBookingModal()">
      <div class="modal-content" (click)="$event.stopPropagation()">
        <div class="modal-header">
          <h3>Confirm Booking</h3>
          <button class="close-btn" (click)="closeBookingModal()">&times;</button>
        </div>
        <div class="modal-body">
          <div class="booking-details">
            <p><strong>Driver:</strong> {{ selectedRide.driver_name }}</p>
            <p><strong>Route:</strong> {{ getStopName(selectedRide.origin_stop_id) }} â†’ {{ getStopName(selectedRide.destination_stop_id) }}</p>
            <p><strong>Departure:</strong> {{ formatDateTime(selectedRide.departure_time) }}</p>
            <p><strong>Available Seats:</strong> {{ selectedRide.available_seats || selectedRide.seats }}</p>
            <p *ngIf="selectedRide.price"><strong>Price:</strong> â‚¹{{ selectedRide.price }}</p>
          </div>
          <div class="rider-info">
            <h4>Rider Information</h4>
            <p><strong>Name:</strong> {{ riderDetails.rider_name }}</p>
            <p><strong>Gender:</strong> {{ riderDetails.gender }}</p>
          </div>
        </div>
        <div class="modal-footer">
          <button class="cancel-btn" (click)="closeBookingModal()">Cancel</button>
          <button class="confirm-btn" (click)="confirmBooking()" [disabled]="isBooking">
            {{ isBooking ? 'Booking...' : 'Confirm Booking' }}
          </button>
        </div>
      </div>
    </div>

    <!-- Success/Error Messages -->
    <div class="message" *ngIf="message" [ngClass]="messageType">
      {{ message }}
    </div>
  </div>
</div>